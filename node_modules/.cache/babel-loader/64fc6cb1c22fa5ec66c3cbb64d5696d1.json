{"ast":null,"code":"import _objectSpread from\"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,Fragment}from'react';import ReactMapGL,{Marker,FlyToInterpolator}from'react-map-gl';import WebMercatorViewport from'viewport-mercator-project';import\"mapbox-gl/dist/mapbox-gl.css\";var TOKEN=process.env.REACT_APP_MAPBOX_TOKEN;var Map=/*#__PURE__*/function(_Component){_inherits(Map,_Component);function Map(){var _getPrototypeOf2;var _this;_classCallCheck(this,Map);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Map)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={viewport:{width:980,height:350,latitude:0,longitude:0,zoom:11},showDirections:false};_this.showDirections=function(){_this.setState(_objectSpread({},_this.state,{showDirections:!_this.state.showDirections}));};_this.getLeadLocation=function(){_this.setState({viewport:_objectSpread({},_this.state.viewport,{latitude:parseFloat(_this.props.lead.latitude),longitude:parseFloat(_this.props.lead.longitude)})});};_this.getPositions=function(){var _fitBounds=new WebMercatorViewport(_this.state.viewport).fitBounds([[parseFloat(_this.props.lead.longitude),parseFloat(_this.props.lead.latitude)],[parseFloat(_this.props.user.longitude),parseFloat(_this.props.user.latitude)]],{padding:30,offset:[0,-35]}),longitude=_fitBounds.longitude,latitude=_fitBounds.latitude,zoom=_fitBounds.zoom;var viewport=_objectSpread({},_this.state.viewport,{longitude:longitude,latitude:latitude,zoom:zoom,transitionDuration:2000,transitionInterpolator:new FlyToInterpolator()});_this.setState({viewport:viewport});};_this.initializeMapForDirections=function(){var userLon=parseFloat(_this.props.user.longitude);var userLat=parseFloat(_this.props.user.latitude);var clientLon=parseFloat(_this.props.lead.longitude);var clientLat=parseFloat(_this.props.lead.latitude);// if address is faulty \nif(clientLon===0&&clientLat===0)return;var map=_this.reactMap.getMap();var start=[userLon,userLat];var end=[clientLon,clientLat];var directionsApi=\"https://api.mapbox.com/directions/v5/mapbox/driving/\".concat(start[0],\",\").concat(start[1],\";\").concat(end[0],\",\").concat(end[1],\"?steps=true&geometries=geojson&access_token=\").concat(TOKEN);var getRoute=function getRoute(start,end){fetch(directionsApi).then(function(res){return res.json();}).then(function(res){if(res.routes===undefined)return;//added in case fake address\nvar data=res.routes[0];var route=data.geometry.coordinates;var geojson={type:'Feature',properties:{},geometry:{type:'LineString',coordinates:route}};setTimeout(function(){return null;},200);//added this to prevent error in style not loading\nif(map.getSource('route')){map.getSource('route').setData(geojson);}else{map.addLayer({id:'route',type:'line',source:{type:'geojson',data:{type:'Feature',properties:{},geometry:{type:'LineString',coordinates:geojson}}},layout:{'line-join':'round','line-cap':'round'},paint:{'line-color':'#3887be','line-width':5,'line-opacity':0.75}});}//turn instructions here\nvar instructions=document.getElementById('instructions');var steps=data.legs[0].steps;// console.log(steps)\nvar tripInstructions=[];for(var i=0;i<steps.length;i++){tripInstructions.push('<li>'+steps[i].maneuver.instruction+'</li>');instructions.innerHTML='<br><span class=\"duration\">Trip duration: '+Math.floor(data.duration/60)+' min </span>'+tripInstructions.join('');}// console.log(tripInstructions)\n});//end fetch\n};//end function getRoute\n//changed from load to style.load to prevent layers being added to the map, before map style is applied\nmap.on('style.load',function(){map.addLayer({id:'point',type:'circle',source:{type:'geojson',data:{type:'FeatureCollection',features:[{type:'Feature',properties:{},geometry:{type:'Point',coordinates:start}}]}},//end source object of start position lon lat\npaint:{'circle-radius':10,'circle-color':'#3887be'}});//end start map layer\n// took out code from where var end is defined in tutorial\nif(map.getLayer('end')){map.getSource('end').setData(end);}else{map.addLayer({id:'end',type:'circle',source:{type:'geojson',data:{type:'FeatureCollection',features:[{type:'Feature',properties:{},geometry:{type:'Point',coordinates:end}}]}},// end source object of end position lon lat\npaint:{'circle-radius':10,'circle-color':'#f30'}});//end end of map layer\n}});getRoute(start,end);};return _this;}_createClass(Map,[{key:\"componentDidMount\",value:function componentDidMount(){this.getLeadLocation();this.initializeMapForDirections();}},{key:\"render\",//end initialize map for directions\nvalue:function render(){var _this2=this;return React.createElement(\"div\",{className:\"map\"},React.createElement(\"div\",{onMouseLeave:this.showDirections,style:{display:this.state.showDirections?'block':'none'},id:\"instructions\"}),React.createElement(ReactMapGL,Object.assign({mapboxApiAccessToken:TOKEN,mapStyle:\"mapbox://styles/mapbox/navigation-guidance-day-v4\"},this.state.viewport,{onViewportChange:function onViewportChange(viewport){return _this2.setState({viewport:viewport});},ref:function ref(reactMap){return _this2.reactMap=reactMap;}}),React.createElement(\"button\",{onClick:this.getPositions},\"Get Positions\"),React.createElement(\"button\",{onClick:this.initializeMapForDirections},\"Show Route\"),React.createElement(\"button\",{onClick:this.showDirections},\"Get Directions\"),React.createElement(Fragment,null,React.createElement(Marker,{latitude:parseFloat(this.props.lead.latitude),longitude:parseFloat(this.props.lead.longitude)},\"Client\"),React.createElement(Marker,{latitude:parseFloat(this.props.user.latitude),longitude:parseFloat(this.props.user.longitude)},\"You\"))));}}]);return Map;}(Component);export default Map;","map":{"version":3,"sources":["/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/src/containers/Map.js"],"names":["React","Component","Fragment","ReactMapGL","Marker","FlyToInterpolator","WebMercatorViewport","TOKEN","process","env","REACT_APP_MAPBOX_TOKEN","Map","state","viewport","width","height","latitude","longitude","zoom","showDirections","setState","getLeadLocation","parseFloat","props","lead","getPositions","fitBounds","user","padding","offset","transitionDuration","transitionInterpolator","initializeMapForDirections","userLon","userLat","clientLon","clientLat","map","reactMap","getMap","start","end","directionsApi","getRoute","fetch","then","res","json","routes","undefined","data","route","geometry","coordinates","geojson","type","properties","setTimeout","getSource","setData","addLayer","id","source","layout","paint","instructions","document","getElementById","steps","legs","tripInstructions","i","length","push","maneuver","instruction","innerHTML","Math","floor","duration","join","on","features","getLayer","display"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport ReactMapGL, {Marker,  FlyToInterpolator} from 'react-map-gl'\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport \"mapbox-gl/dist/mapbox-gl.css\"\n\nconst TOKEN = process.env.REACT_APP_MAPBOX_TOKEN\n\nclass Map extends Component {\n\n    state = { \n        viewport: {\n            width: 980,\n            height: 350,\n            latitude: 0,\n            longitude: 0,\n            zoom: 11\n        },\n        showDirections: false\n    }\n    \n    showDirections = () => {\n        this.setState(\n            { \n                ...this.state,\n                showDirections: !this.state.showDirections  \n            })\n    }\n\n    getLeadLocation = () => {\n        this.setState(\n            {   \n                viewport: {...this.state.viewport, latitude: parseFloat(this.props.lead.latitude), longitude: parseFloat(this.props.lead.longitude)}\n            })\n    }\n\n    getPositions = () => {\n        const {longitude, latitude, zoom} = new WebMercatorViewport(this.state.viewport)\n        .fitBounds([[parseFloat(this.props.lead.longitude), parseFloat(this.props.lead.latitude)], [parseFloat(this.props.user.longitude), parseFloat(this.props.user.latitude)]],{\n            padding: 30,\n            offset: [0, -35]\n        })\n        const viewport = {\n            ...this.state.viewport,\n            longitude,\n            latitude,\n            zoom,\n            transitionDuration: 2000,\n            transitionInterpolator: new FlyToInterpolator(),\n            \n        }\n        this.setState({viewport})\n    }\n\n    componentDidMount() {\n        this.getLeadLocation()\n        this.initializeMapForDirections()\n    }\n    \n    initializeMapForDirections = () => {\n\n        let userLon =  parseFloat(this.props.user.longitude)\n        let userLat = parseFloat(this.props.user.latitude)\n        let clientLon = parseFloat(this.props.lead.longitude)\n        let clientLat = parseFloat(this.props.lead.latitude)\n\n        // if address is faulty \n        if (clientLon === 0 && clientLat === 0) return\n\n        const map = this.reactMap.getMap()\n        const start = [userLon, userLat]\n        const end = [clientLon, clientLat]\n        \n        const directionsApi = `https://api.mapbox.com/directions/v5/mapbox/driving/${start[0]},${start[1]};${end[0]},${end[1]}?steps=true&geometries=geojson&access_token=${TOKEN}`\n        const getRoute = (start, end) => {\n            fetch(directionsApi).then(res => res.json()).then(res => {\n                if (res.routes === undefined) return //added in case fake address\n                let data = res.routes[0]\n\n                let route = data.geometry.coordinates\n                let geojson = {\n                    type: 'Feature',\n                    properties: {},\n                    geometry: {\n                        type: 'LineString',\n                        coordinates: route\n                    }\n                }\n                    setTimeout(()=> null, 200) //added this to prevent error in style not loading\n                if (map.getSource('route')){\n                    map.getSource('route').setData(geojson)\n                } else {\n                    map.addLayer({\n                        id: 'route',\n                        type: 'line',\n                        source: {\n                            type: 'geojson',\n                            data: {\n                                type: 'Feature',\n                                properties: {},\n                                geometry: {\n                                    type: 'LineString',\n                                    coordinates: geojson\n                                }\n                            }\n                        },\n                        layout: {\n                            'line-join': 'round',\n                            'line-cap': 'round'\n                        },\n                        paint: {\n                            'line-color': '#3887be',\n                            'line-width': 5,\n                            'line-opacity': 0.75\n                        }\n                    })\n                }\n                //turn instructions here\n                const instructions = document.getElementById('instructions')\n                const steps = data.legs[0].steps\n                // console.log(steps)\n                \n                const tripInstructions = []\n                for (let i = 0; i < steps.length; i++) {\n                    tripInstructions.push('<li>' + steps[i].maneuver.instruction + '</li>')\n                    instructions.innerHTML = '<br><span class=\"duration\">Trip duration: ' + Math.floor(data.duration / 60) + ' min </span>' + tripInstructions.join('')\n                }\n                // console.log(tripInstructions)\n            }) //end fetch\n        } //end function getRoute\n        \n        //changed from load to style.load to prevent layers being added to the map, before map style is applied\n        map.on('style.load', function() {\n            map.addLayer({\n                id: 'point',\n                type: 'circle',\n                source: {\n                    type: 'geojson',\n                    data: {\n                        type: 'FeatureCollection',\n                        features: [{\n                            type: 'Feature',\n                            properties: {},\n                            geometry: {\n                                type:'Point',\n                                coordinates: start\n                            }\n                        }]\n                    }\n                }, //end source object of start position lon lat\n                paint: {\n                    'circle-radius': 10,\n                    'circle-color': '#3887be'\n                }\n            }) //end start map layer\n            // took out code from where var end is defined in tutorial\n            if (map.getLayer('end')) {\n                map.getSource('end').setData(end)\n            } else {\n                map.addLayer({\n                    id: 'end',\n                    type: 'circle',\n                    source: {\n                        type: 'geojson',\n                        data: {\n                            type: 'FeatureCollection',\n                            features: [{\n                                type: 'Feature',\n                                properties: {},\n                                geometry: {\n                                    type: 'Point',\n                                    coordinates: end\n                                }\n                            }]\n                        }\n                    }, // end source object of end position lon lat\n                    paint: {\n                        'circle-radius': 10,\n                        'circle-color': '#f30'\n                    }\n                }) //end end of map layer\n            }\n        })\n        getRoute(start, end)\n    } //end initialize map for directions\n\n    render() {  \n        return ( \n            <div className=\"map\">\n                <div onMouseLeave={this.showDirections} \n                style={{display: this.state.showDirections ? 'block' : 'none'}} \n                id=\"instructions\"></div>\n                <ReactMapGL\n                    mapboxApiAccessToken={TOKEN}\n                    mapStyle='mapbox://styles/mapbox/navigation-guidance-day-v4'\n                    {...this.state.viewport}\n                    onViewportChange={(viewport) => this.setState({viewport})}\n                    ref={(reactMap) => this.reactMap = reactMap}>\n\n                    <button onClick={this.getPositions}>Get Positions</button>\n                    <button onClick={this.initializeMapForDirections}>Show Route</button>\n                    <button onClick={this.showDirections}>Get Directions</button>\n\n                        <Fragment>\n                            <Marker latitude={parseFloat(this.props.lead.latitude)} longitude={parseFloat(this.props.lead.longitude)}>\n                                Client\n                            </Marker>\n                            <Marker latitude={parseFloat(this.props.user.latitude)} longitude={parseFloat(this.props.user.longitude)}>\n                                You\n                            </Marker>\n                        </Fragment>\n\n                </ReactMapGL>\n            </div>\n        )\n    }\n}\n\nexport default Map;"]},"metadata":{},"sourceType":"module"}