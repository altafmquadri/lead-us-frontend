{"ast":null,"code":"import _objectSpread from \"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/src/containers/Map.js\";\nimport React, { Component, Fragment } from 'react';\nimport ReactMapGL, { Marker, FlyToInterpolator } from 'react-map-gl';\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport mapboxgl from 'mapbox-gl';\nimport Directions from '@mapbox/mapbox-gl-directions/dist/mapbox-gl-directions';\nconst TOKEN = process.env.REACT_APP_MAPBOX_TOKEN;\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_TOKEN;\n\nclass Map extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      viewport: {\n        width: 950,\n        height: 250,\n        latitude: 40.7577,\n        longitude: -72.4376,\n        zoom: 12\n      }\n    };\n\n    this.getDirections = () => {};\n\n    this.getLeadLocation = () => {\n      this.setState({\n        viewport: _objectSpread({}, this.state.viewport, {\n          latitude: parseFloat(this.props.lead.latitude),\n          longitude: parseFloat(this.props.lead.longitude)\n        })\n      });\n    };\n\n    this.getPositions = () => {\n      const _fitBounds = new WebMercatorViewport(this.state.viewport).fitBounds([[parseFloat(this.props.lead.longitude), parseFloat(this.props.lead.latitude)], [parseFloat(this.props.user.longitude), parseFloat(this.props.user.latitude)]], {\n        padding: 30,\n        offset: [0, -20]\n      }),\n            longitude = _fitBounds.longitude,\n            latitude = _fitBounds.latitude,\n            zoom = _fitBounds.zoom;\n\n      const viewport = _objectSpread({}, this.state.viewport, {\n        longitude,\n        latitude,\n        zoom,\n        transitionDuration: 2000,\n        transitionInterpolator: new FlyToInterpolator()\n      });\n\n      this.setState({\n        viewport\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getLeadLocation();\n    const map = this.reactMap.getMap();\n    const directions = new Directions(map);\n    map.addControl(directions, 'top-left'); // map.addControl(\n    //     new MapboxDirections({\n    //     accessToken: mapboxgl.accessToken\n    //     }),\n    //     'top-left'\n    //     )\n  }\n\n  render() {\n    return React.createElement(ReactMapGL, Object.assign({\n      mapboxApiAccessToken: TOKEN,\n      mapStyle: \"mapbox://styles/mapbox/navigation-guidance-day-v4\"\n    }, this.state.viewport, {\n      onViewportChange: viewport => this.setState({\n        viewport\n      }),\n      ref: reactMap => this.reactMap = reactMap,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.getPositions,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Get Positions\"), React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(Marker, {\n      latitude: parseFloat(this.props.lead.latitude),\n      longitude: parseFloat(this.props.lead.longitude),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Client\"), React.createElement(Marker, {\n      latitude: parseFloat(this.props.user.latitude),\n      longitude: parseFloat(this.props.user.longitude),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"You\")));\n  }\n\n}\n\nexport default Map; // https://api.mapbox.com/directions/v5/mapbox/driving/-74.043505%2C40.721642%3B%20-73.853657%2C40.746527.json?access_token=pk.eyJ1IjoiYWx0YWZtcXVhZHJpIiwiYSI6ImNrM2ppM2N3YjBqODczZHJtMHdndm84bmEifQ.cSDhDuaxlGYl34rlk2G_GA\n// {\n//     \"routes\": [\n//       {\n//         \"weight_name\": \"routability\",\n//         \"legs\": [\n//           {\n//             \"summary\": \"I 278 East, I 495 East\",\n//             \"steps\": [],\n//             \"distance\": 21055.3,\n//             \"duration\": 2910,\n//             \"weight\": 2910\n//           }\n//         ],\n//         \"geometry\": \"{mpwFxr|bMl@sNgs@_Gb@{UbUeuClPqYnF{FzFdG_AsDuBcBZmG|@yAkEiDlYc}@}IuDfMkk@`Lgj@v`@}lBRmBgCa\\\\uVgUyu@ksAmIeb@kHwSid@k`@kAgLj@uFbSmcAlImMxF}KzBo\\\\dAqz@uNs`@iD}f@ql@aoCkAwMaBeQ{v@n[yC{N\",\n//         \"distance\": 21055.3,\n//         \"duration\": 2910,\n//         \"weight\": 2910\n//       }\n//     ],\n//     \"waypoints\": [\n//       {\n//         \"distance\": 11.116,\n//         \"name\": \"1st Street\",\n//         \"location\": [\n//           -74.043488,\n//           40.721741\n//         ]\n//       },\n//       {\n//         \"distance\": 20.217,\n//         \"name\": \"48th Avenue\",\n//         \"location\": [\n//           -73.853752,\n//           40.746696\n//         ]\n//       }\n//     ],\n//     \"code\": \"Ok\",\n//     \"uuid\": \"QAjcmRWR9dm8pAYPX42HeNodPun_IIhmxIJG5pjQU6abCnrIUXv7Aw==\"\n//   }","map":{"version":3,"sources":["/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/src/containers/Map.js"],"names":["React","Component","Fragment","ReactMapGL","Marker","FlyToInterpolator","WebMercatorViewport","mapboxgl","Directions","TOKEN","process","env","REACT_APP_MAPBOX_TOKEN","accessToken","Map","state","viewport","width","height","latitude","longitude","zoom","getDirections","getLeadLocation","setState","parseFloat","props","lead","getPositions","fitBounds","user","padding","offset","transitionDuration","transitionInterpolator","componentDidMount","map","reactMap","getMap","directions","addControl","render"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport ReactMapGL, {Marker,  FlyToInterpolator} from 'react-map-gl'\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport mapboxgl from 'mapbox-gl'\nimport Directions from '@mapbox/mapbox-gl-directions/dist/mapbox-gl-directions'\n\n\nconst TOKEN = process.env.REACT_APP_MAPBOX_TOKEN\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_TOKEN\n\n\nclass Map extends Component {\n\n    state = { \n        viewport: {\n            width: 950,\n            height: 250,\n            latitude: 40.7577,\n            longitude: -72.4376,\n            zoom: 12\n        }\n    }\n     \n    componentDidMount() {\n        this.getLeadLocation()\n        const map = this.reactMap.getMap()\n        const directions = new Directions(map)\n        map.addControl(directions, 'top-left')\n        // map.addControl(\n        //     new MapboxDirections({\n        //     accessToken: mapboxgl.accessToken\n        //     }),\n        //     'top-left'\n        //     )\n    }\n\n    getDirections = () => {\n        \n    }\n\n    getLeadLocation = () => {\n        this.setState(\n            {   \n                viewport: {...this.state.viewport, latitude: parseFloat(this.props.lead.latitude), longitude: parseFloat(this.props.lead.longitude)}\n            })\n    }\n\n     getPositions = () => {\n        const {longitude, latitude, zoom} = new WebMercatorViewport(this.state.viewport)\n        .fitBounds([[parseFloat(this.props.lead.longitude), parseFloat(this.props.lead.latitude)], [parseFloat(this.props.user.longitude), parseFloat(this.props.user.latitude)]],{\n            padding: 30,\n            offset: [0, -20]\n          })\n        const viewport = {\n            ...this.state.viewport,\n            longitude,\n            latitude,\n            zoom,\n            transitionDuration: 2000,\n            transitionInterpolator: new FlyToInterpolator(),\n            \n        }\n        this.setState({viewport})\n     }\n\n    render() { \n        \n        \n        return ( \n                <ReactMapGL\n                    mapboxApiAccessToken={TOKEN}\n                    mapStyle='mapbox://styles/mapbox/navigation-guidance-day-v4'\n                    {...this.state.viewport}\n                    onViewportChange={(viewport) => this.setState({viewport})}\n                    ref={(reactMap) => this.reactMap = reactMap}\n                    \n                    >\n                        <button onClick={this.getPositions}>Get Positions</button>\n                        <Fragment>\n                            <Marker latitude={parseFloat(this.props.lead.latitude)} longitude={parseFloat(this.props.lead.longitude)}>\n                                Client\n                            </Marker>\n                             <Marker latitude={parseFloat(this.props.user.latitude)} longitude={parseFloat(this.props.user.longitude)}>\n                                You\n                            </Marker>\n                        </Fragment>    \n\n                </ReactMapGL>\n        \n         )\n    }\n}\n \nexport default Map;\n\n\n\n// https://api.mapbox.com/directions/v5/mapbox/driving/-74.043505%2C40.721642%3B%20-73.853657%2C40.746527.json?access_token=pk.eyJ1IjoiYWx0YWZtcXVhZHJpIiwiYSI6ImNrM2ppM2N3YjBqODczZHJtMHdndm84bmEifQ.cSDhDuaxlGYl34rlk2G_GA\n\n\n\n\n// {\n//     \"routes\": [\n//       {\n//         \"weight_name\": \"routability\",\n//         \"legs\": [\n//           {\n//             \"summary\": \"I 278 East, I 495 East\",\n//             \"steps\": [],\n//             \"distance\": 21055.3,\n//             \"duration\": 2910,\n//             \"weight\": 2910\n//           }\n//         ],\n//         \"geometry\": \"{mpwFxr|bMl@sNgs@_Gb@{UbUeuClPqYnF{FzFdG_AsDuBcBZmG|@yAkEiDlYc}@}IuDfMkk@`Lgj@v`@}lBRmBgCa\\\\uVgUyu@ksAmIeb@kHwSid@k`@kAgLj@uFbSmcAlImMxF}KzBo\\\\dAqz@uNs`@iD}f@ql@aoCkAwMaBeQ{v@n[yC{N\",\n//         \"distance\": 21055.3,\n//         \"duration\": 2910,\n//         \"weight\": 2910\n//       }\n//     ],\n//     \"waypoints\": [\n//       {\n//         \"distance\": 11.116,\n//         \"name\": \"1st Street\",\n//         \"location\": [\n//           -74.043488,\n//           40.721741\n//         ]\n//       },\n//       {\n//         \"distance\": 20.217,\n//         \"name\": \"48th Avenue\",\n//         \"location\": [\n//           -73.853752,\n//           40.746696\n//         ]\n//       }\n//     ],\n//     \"code\": \"Ok\",\n//     \"uuid\": \"QAjcmRWR9dm8pAYPX42HeNodPun_IIhmxIJG5pjQU6abCnrIUXv7Aw==\"\n//   }"]},"metadata":{},"sourceType":"module"}