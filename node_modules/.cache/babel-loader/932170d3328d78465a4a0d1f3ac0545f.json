{"ast":null,"code":"import _classCallCheck from\"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'./ActivityForms.css';// const appointmentsApi = 'http://localhost:3000/api/v1/appointments'\n// const salesApi = 'http://localhost:3000/api/v1/sales'\n// const leadUpdateApi = 'http://localhost:3000/api/v1/leads'\nvar appointmentsApi='https://lead-us-backend.herokuapp.com/api/v1/appointments';var salesApi='https://lead-us-backend.herokuapp.com/api/v1/sales';var leadUpdateApi='https://lead-us-backend.herokuapp.com/api/v1/leads';var AppointmentUpdateForm=/*#__PURE__*/function(_React$Component){_inherits(AppointmentUpdateForm,_React$Component);function AppointmentUpdateForm(){var _getPrototypeOf2;var _this;_classCallCheck(this,AppointmentUpdateForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(AppointmentUpdateForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={appointment:_this.props.clickedEditAppointment,'presentation_made?':false,'made_sale?':false,annualized_life_premium:0.0,salePrompt:false};_this.onTogglePresentation=function(){_this.setState({'presentation_made?':!_this.state['presentation_made?']});};_this.onToggleSale=function(){_this.setState({'made_sale?':!_this.state['made_sale?'],'presentation_made?':true});};_this.onAptEditSubmission=function(e){e.preventDefault();fetch(appointmentsApi+'/'+_this.state.appointment.id,{method:'PATCH',headers:{'Content-type':'application/json',Accepts:'application/json'},body:JSON.stringify({id:_this.state.appointment.id,'presentation_made?':_this.state['presentation_made?'],'made_sale?':_this.state['made_sale?']})}).then(function(res){return res.json();}).then(function(appointment){if(appointment['made_sale?']){fetch(salesApi,{method:'POST',headers:{'Content-type':'application/json',Accepts:'application/json'},body:JSON.stringify({user_id:appointment.user_id,lead_id:appointment.lead_id,annualized_life_premium:parseFloat(_this.state.annualized_life_premium)})}).then(function(res){return res.json();}).then(function(sale){return _this.props.addSale(sale);}).then(fetch(leadUpdateApi+'/'+appointment.lead_id,{method:'PATCH',headers:{'Content-type':'application/json',Accepts:'application/json'},body:JSON.stringify({id:appointment.lead_id,'sale_made?':true,'lead_archived?':false})}).then(function(res){return res.json();}).then(function(lead){return _this.props.addPastClient(lead);}));}_this.props.editTheAppointment(appointment);});_this.setState({'presentation_made?':false,'made_sale?':false},function(){return _this.props.editAppointmentFormAfterSubmit();});};_this.amountInputHandler=function(e){_this.setState({annualized_life_premium:e.target.value});};return _this;}_createClass(AppointmentUpdateForm,[{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"app-update-div\"},React.createElement(\"form\",{onSubmit:this.onAptEditSubmission,className:\"app-update-form\"},React.createElement(\"div\",{className:\"app-update-label-radio\"},React.createElement(\"label\",null,\"Presentation Made:\"),React.createElement(\"input\",{type:\"radio\",name:\"presentation_made?\",onChange:this.onTogglePresentation,value:this.state['presentation_made?'],checked:!!this.state['presentation_made?']?true:this.state['presentation_made?']?true:null}),\"True\",React.createElement(\"input\",{type:\"radio\",name:\"presentation_made?\",onChange:this.onTogglePresentation,value:this.state['presentation_made?'],checked:!!this.state['presentation_made?']?null:true}),\"False\"),React.createElement(\"div\",{className:\"app-update-label-radio\"},React.createElement(\"label\",null,\"Made Sale:\"),React.createElement(\"input\",{type:\"radio\",name:\"made_sale?\",onChange:this.onToggleSale,value:this.state['made_sale?'],checked:!!this.state['made_sale?']?true:null}),\"True\",React.createElement(\"input\",{type:\"radio\",name:\"made_sale?\",onChange:this.onToggleSale,value:this.state['made_sale?'],checked:!!this.state['made_sale?']?null:true}),\"False\"),this.state['made_sale?']===false?null:React.createElement(\"div\",{className:\"app-update-label-input\"},React.createElement(\"label\",null,\"Annualized Life Premium:\"),React.createElement(\"input\",{className:\"app-update-label-input-number\",type:\"number\",name:\"annualized_life_premium\",onChange:this.amountInputHandler,value:this.state.annualized_life_premium})),React.createElement(\"div\",{className:\"submit-app-update\"},React.createElement(\"input\",{className:\"submit-btn-app-update\",type:\"submit\",value:\"Submit\"}))));}}]);return AppointmentUpdateForm;}(React.Component);export default AppointmentUpdateForm;","map":{"version":3,"sources":["/Users/altafquadri/Development/code/Mod5Project/Frontend/lead-us-react/src/components/AppointmentUpdateForm.js"],"names":["React","appointmentsApi","salesApi","leadUpdateApi","AppointmentUpdateForm","state","appointment","props","clickedEditAppointment","annualized_life_premium","salePrompt","onTogglePresentation","setState","onToggleSale","onAptEditSubmission","e","preventDefault","fetch","id","method","headers","Accepts","body","JSON","stringify","then","res","json","user_id","lead_id","parseFloat","sale","addSale","lead","addPastClient","editTheAppointment","editAppointmentFormAfterSubmit","amountInputHandler","target","value","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './ActivityForms.css'\n\n// const appointmentsApi = 'http://localhost:3000/api/v1/appointments'\n// const salesApi = 'http://localhost:3000/api/v1/sales'\n// const leadUpdateApi = 'http://localhost:3000/api/v1/leads'\n\n\nconst appointmentsApi = 'https://lead-us-backend.herokuapp.com/api/v1/appointments'\nconst salesApi = 'https://lead-us-backend.herokuapp.com/api/v1/sales'\nconst leadUpdateApi = 'https://lead-us-backend.herokuapp.com/api/v1/leads'\n\nclass AppointmentUpdateForm extends React.Component {\n\n    state = {\n            appointment: this.props.clickedEditAppointment,\n            'presentation_made?': false,\n            'made_sale?': false,\n            annualized_life_premium: 0.0,\n            salePrompt: false\n    }\n\n    onTogglePresentation = () => {\n        this.setState({ 'presentation_made?': !this.state['presentation_made?']  });\n    }\n\n    onToggleSale = () => {\n        this.setState(\n            { \n                'made_sale?': !this.state['made_sale?'],\n                'presentation_made?': true  \n            });\n    }\n\n    onAptEditSubmission = (e) => {\n        e.preventDefault()\n        fetch(appointmentsApi + '/' + this.state.appointment.id, {\n            method: 'PATCH',\n            headers: {\n                'Content-type': 'application/json',\n                Accepts: 'application/json'\n            },\n            body: JSON.stringify({\n                id: this.state.appointment.id,\n                'presentation_made?': this.state['presentation_made?'],\n                'made_sale?': this.state['made_sale?']\n            })\n        }).then(res => res.json()).then(appointment => {\n            if (appointment['made_sale?']) {\n                fetch(salesApi, {\n                    method: 'POST',\n                    headers: {\n                        'Content-type': 'application/json',\n                        Accepts: 'application/json'\n                    },\n                    body: JSON.stringify({\n                        user_id: appointment.user_id,\n                        lead_id: appointment.lead_id,\n                        annualized_life_premium: parseFloat(this.state.annualized_life_premium)\n                    })\n                }).then(res => res.json()).then(sale => this.props.addSale(sale)).then(\n\n                fetch(leadUpdateApi + '/' + appointment.lead_id, {\n                    method: 'PATCH',\n                    headers: {\n                        'Content-type': 'application/json',\n                        Accepts: 'application/json'\n                    },\n                    body: JSON.stringify({\n                        id: appointment.lead_id,\n                        'sale_made?': true,\n                        'lead_archived?': false,\n                    })\n                }).then(res => res.json()).then(lead => this.props.addPastClient(lead)))\n\n            }\n            this.props.editTheAppointment(appointment)\n        })\n        this.setState(\n            { \n                'presentation_made?': false,\n                'made_sale?': false,\n            }, () => this.props.editAppointmentFormAfterSubmit())\n    } \n\n    amountInputHandler = (e) => {\n        this.setState({ annualized_life_premium: e.target.value })\n    }\n\n\n    render () {\n\n        return (\n            <div className=\"app-update-div\">\n                <form onSubmit={this.onAptEditSubmission} \n                    className=\"app-update-form\">\n\n                    <div className=\"app-update-label-radio\">\n                        <label>Presentation Made:</label>\n                            <input \n                                type=\"radio\" \n                                name=\"presentation_made?\" \n                                onChange={this.onTogglePresentation}\n                                value={this.state['presentation_made?']} \n                                checked={!!this.state['presentation_made?'] ? true \n                                :this.state['presentation_made?'] ? true\n                                : null}/>True\n                            \n                            <input \n                                type=\"radio\" \n                                name=\"presentation_made?\" \n                                onChange={this.onTogglePresentation}\n                                value={this.state['presentation_made?']} \n                                checked={!!this.state['presentation_made?'] ? null : true}/>False\n                    </div>\n\n                    <div className=\"app-update-label-radio\">\n                        <label>Made Sale:</label>\n                            <input \n                                type=\"radio\" \n                                name=\"made_sale?\" \n                                onChange={this.onToggleSale}\n                                value={this.state['made_sale?']} \n                                checked={!!this.state['made_sale?'] ? true : null}/>True\n                            \n                            <input \n                                type=\"radio\" \n                                name=\"made_sale?\" \n                                onChange={this.onToggleSale}\n                                value={this.state['made_sale?']} \n                                checked={!!this.state['made_sale?'] ? null : true} />False\n                    </div>\n\n                        \n                            {this.state['made_sale?'] === false ? null :\n                                <div className=\"app-update-label-input\">\n                                    <label>Annualized Life Premium:</label>\n                                        <input className=\"app-update-label-input-number\"\n                                            type=\"number\" \n                                            name=\"annualized_life_premium\"\n                                            onChange={this.amountInputHandler}\n                                            value={this.state.annualized_life_premium} />\n                                </div>}\n\n                    <div className=\"submit-app-update\">\n                        <input className=\"submit-btn-app-update\" type=\"submit\" value=\"Submit\"/>\n                    </div>\n                </form>\n            </div>\n        )\n\n    }\n}\n\nexport default AppointmentUpdateForm;"]},"metadata":{},"sourceType":"module"}